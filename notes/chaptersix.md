# 框架开发实践

## 主流框架的选型和对比

| 框架 | 核心概念 | 主要优势 | 典型应用场景 |
| ---- | -------- | ------- | ----------- |
| AutoGen | 对话的智能体 | 自动化多智能体对话流，高度可定制的交互模式 | 自动化代码生成与测试、模拟产品开发流程 |
| AgentScope | 消息传递 | 易用性强，工程化程度高，支持分布式部署 | 构建复杂、可运维的大规模多智能体应用 |
| CAMEL | 角色扮演 | 极简的协作设定，通过初始提示驱动自主对话 | 探索性任务、创意生成、模拟特定领域专家写作 |
| LangGraph | 状态图 | 天然支持循环和条件分支，精准控制复杂工作流 | 实现Reflection、迭代式优化、需要人工介入的流程 |

## AutoGen

### 核心理念与特点
- 多智能体协作：不只是单一的大模型，而是通过多个专门化的Agent（例如Coder、ProductManager、Tester）互相通信来完成复杂任务。
- 自动化工作流：强调任务的分解、调度和执行自动化，减少人工干预（例如，Coder 写完代码后由 Tester 自动接管，智能体在群聊中通过自动化消息传递，不断对话、协作、迭代直至最终目标达成）。
- 人类在环：保留人类随时介入的能力，确保安全性、可控性和灵活性。
- 模块化与可扩展性：设计上鼓励开发者根据需求定制 Agent，组合不同工具链。

### 核心机制

1. 框架结构的演进
  - 分层设计：框架被拆分为两个核心模块
    - autogen-core：框架的底层基础，封装了与语言模型交互、消息传递等核心功能。他的存在保证了框架的稳定性和未来扩展性。
    - autogen-agentchat：构建于core之上，提供了用于开发对话式智能体应用的高级接口，简化了多智能体应用的开发流程。分层策略使得各组件职责明确，降低了系统的耦合度

  - 异步优先：新架构全面转向异步编程（async/await）。
    - 在多智能体协作场景中，网络请求（如调用 LLM API）是主要耗时操作。异步模式允许系统在等待一个智能体响应时处理其他任务，从而避免了线程阻塞，显著提升了并发处理能力和系统资源的利用效率。
  
2. 核心智能体组件
    智能体是执行任务的基本单元。
    - AssistantAgent（助理智能体）：任务的主要解决者，核心是封装了一个大语言模型（LLM）。职责是根据对话历史生成富有逻辑和知识的回复，例如提出计划、撰写文章或者编写代码。通过不同的系统消息（SystemMessage），可以为其赋予不同的“专家”角色。
    - UserProxyAgent（用户代理智能体）：AutoGen中独特的组件。它扮演者双重角色：既是人类用户的“代言人”，负责发起任务和传达意图；又是一个可靠的“执行器”，可以配置为执行代码和调用工具，并将结果反馈给其他智能体。这种设计清晰地区分了“思考”（由AssistantAgent完成）与“行动”。

3. 从 GroupChatManager 到 Team
   - 轮询群聊 (RoundRobinGroupChat)：这是一种明确的、顺序化的对话协调机制。它会让参与的智能体按照预定义的顺序依次发言。这种模式非常适用于流程固定的任务，例如一个典型的软件开发流程：产品经理先提出需求，然后工程师编写代码，最后由代码审查员进行检查。
   - 工作流
     1. 首先，创建一个 RoundRobinGroupChat 实例，并将所有参与协作的智能体（如产品经理、工程师等）加入其中。
     2. 当一个任务开始时，群聊会按照预设的顺序，依次激活相应的智能体。
     3. 被选中的智能体根据当前的对话上下文进行响应。
     4. 群聊将新的回复加入对话历史，并激活下一个智能体。
     5. 这个过程会持续进行，直到达到最大对话轮次或满足预设的终止条件。
    